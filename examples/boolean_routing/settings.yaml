# ELSPETH Boolean Routing Example
#
# Routes messages based on their 'approved' field (true/false).
#
# Run with:
#   uv run elspeth run -s examples/boolean_routing/settings.yaml --execute

datasource:
  plugin: csv
  options:
    path: examples/boolean_routing/input.csv

row_plugins:
  # Route based on approved field
  - plugin: field_match_gate
    type: gate
    options:
      field: approved
      matches:
        "true": approved_label    # value -> label mapping
      default_label: rejected_label
    routes:
      approved_label: approved    # label -> sink mapping
      rejected_label: continue    # non-matches continue to output_sink

sinks:
  approved:
    plugin: csv
    options:
      path: examples/boolean_routing/output/approved.csv
  rejected:
    plugin: csv
    options:
      path: examples/boolean_routing/output/rejected.csv

output_sink: rejected

landscape:
  url: sqlite:///examples/boolean_routing/runs/audit.db
